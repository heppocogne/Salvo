[gd_scene load_steps=13 format=3 uid="uid://du6prjbwwp04f"]

[ext_resource type="PackedScene" path="res://gameplay/ship/player/player.tscn" id="1"]
[ext_resource type="Script" path="res://gameplay/screen/battle_screen.gd" id="2"]
[ext_resource type="Texture2D" uid="uid://b0tw8xs12q8y7" path="res://gameplay/screen/simple.png" id="3"]
[ext_resource type="Script" path="res://gameplay/screen/hp_bar.gd" id="6"]
[ext_resource type="Script" path="res://gameplay/screen/weapon_reload_bar.gd" id="7"]
[ext_resource type="PackedScene" path="res://gameplay/screen/play_evaluation.tscn" id="8"]
[ext_resource type="Script" path="res://gameplay/screen/messages.gd" id="9"]
[ext_resource type="Script" path="res://gameplay/screen/repair_time_bar.gd" id="10"]
[ext_resource type="Script" path="res://gameplay/screen/subweapon_reload_bar.gd" id="11"]
[ext_resource type="Script" path="res://gameplay/screen/fps_label.gd" id="12"]
[ext_resource type="AudioStream" uid="uid://d2js0tfops5gi" path="res://gameplay/music/Pleasure_In_Survival.mp3" id="13"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(3072, 68)

[node name="BattleScreen" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource("2")

[node name="BattleMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("13")
autoplay = true

[node name="Node2DRoot" type="Node2D" parent="."]

[node name="Simple" type="Sprite2D" parent="Node2DRoot"]
self_modulate = Color(0.862745, 0.862745, 0.862745, 1)
scale = Vector2(1, 6)
texture = ExtResource("3")
centered = false

[node name="Timer" type="Timer" parent="Node2DRoot"]

[node name="WaterArea" type="Area2D" parent="Node2DRoot"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Node2DRoot/WaterArea"]
position = Vector2(512, 594)
shape = SubResource("1")

[node name="Sprite2D" type="Sprite2D" parent="Node2DRoot/WaterArea"]
self_modulate = Color(0.25098, 0.25098, 0.25098, 1)
position = Vector2(0, 560)
scale = Vector2(1, 1.5)
texture = ExtResource("3")
centered = false

[node name="Player" parent="Node2DRoot" instance=ExtResource("1")]
position = Vector2(100, 560)

[node name="Timer" type="Timer" parent="Node2DRoot/Player"]
wait_time = 1.5
one_shot = true

[node name="VBoxContainer" type="VBoxContainer" parent="."]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0

[node name="FpsLabel" type="Label" parent="VBoxContainer"]
layout_mode = 2
text = "fps:"
script = ExtResource("12")

[node name="CenterContainer" type="CenterContainer" parent="VBoxContainer"]
custom_minimum_size = Vector2(0, 600)
layout_mode = 2
size_flags_vertical = 3

[node name="PanelContainer" type="PanelContainer" parent="VBoxContainer/CenterContainer"]
visible = false
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/CenterContainer"]
layout_mode = 2
script = ExtResource("9")

[node name="Label" type="Label" parent="VBoxContainer/CenterContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4

[node name="Timer" type="Timer" parent="VBoxContainer/CenterContainer/VBoxContainer/Label"]
wait_time = 0.5
one_shot = true
autostart = true

[node name="MarginContainer" type="MarginContainer" parent="VBoxContainer/CenterContainer/VBoxContainer"]
layout_mode = 2

[node name="Evaluations" type="VBoxContainer" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer"]
visible = false
layout_mode = 2

[node name="Label" type="Label" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations"]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
size_flags_horizontal = 4
text = ":PLAY_EVALUATION:"

[node name="AimingAccuracy" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations" instance=ExtResource("8")]
visible = false
layout_mode = 2
title_name = ":AIMING_SKILL:"

[node name="Maneuver" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations" instance=ExtResource("8")]
visible = false
layout_mode = 2
title_name = ":STEERING_SKILL:"

[node name="Reward" type="HBoxContainer" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations"]
visible = false
layout_mode = 2

[node name="Label" type="Label" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations/Reward"]
layout_mode = 2
text = ":REWARD:"

[node name="Point" type="Label" parent="VBoxContainer/CenterContainer/VBoxContainer/MarginContainer/Evaluations/Reward"]
layout_mode = 2
size_flags_horizontal = 3
text = "0 pt"

[node name="Button" type="Button" parent="VBoxContainer/CenterContainer/VBoxContainer"]
visible = false
layout_mode = 2
text = ":RETURN:"

[node name="PanelContainer" type="PanelContainer" parent="VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="CenterContainer" type="CenterContainer" parent="VBoxContainer/PanelContainer"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/PanelContainer/CenterContainer"]
layout_mode = 2

[node name="Durability" type="HBoxContainer" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer"]
layout_mode = 2

[node name="HP" type="Label" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/Durability"]
layout_mode = 2
text = ":DURABILITY:"

[node name="HPBar" type="ProgressBar" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/Durability"]
custom_minimum_size = Vector2(450, 0)
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("6")

[node name="Control" type="Control" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/Durability"]
custom_minimum_size = Vector2(24, 0)
layout_mode = 2

[node name="RepairTime" type="Label" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/Durability"]
layout_mode = 2
text = ":REPAIR:"

[node name="RepairTimeBar" type="ProgressBar" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/Durability"]
custom_minimum_size = Vector2(300, 0)
layout_mode = 2
size_flags_vertical = 3
value = 100.0
script = ExtResource("10")

[node name="MainWeapon" type="HBoxContainer" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/MainWeapon"]
layout_mode = 2
text = ":MAIN_WEAPON:"

[node name="ProgressBar" type="ProgressBar" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/MainWeapon"]
custom_minimum_size = Vector2(300, 24)
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("7")
player_nodepath = NodePath("../../../../../../Node2DRoot/Player")

[node name="SubWeapon" type="HBoxContainer" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/SubWeapon"]
layout_mode = 2
text = ":SUB_WEAPON:"

[node name="ProgressBar" type="ProgressBar" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/SubWeapon"]
custom_minimum_size = Vector2(300, 24)
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("11")
weapon_key = ""
player_nodepath = NodePath("../../../../../../Node2DRoot/Player")

[node name="WeaponName" type="Label" parent="VBoxContainer/PanelContainer/CenterContainer/VBoxContainer/SubWeapon"]
layout_mode = 2

[connection signal="tree_exiting" from="." to="." method="_on_BattleScreen_tree_exiting"]
[connection signal="timeout" from="Node2DRoot/Player/Timer" to="." method="_on_PlayerMoveTimer_timeout"]
[connection signal="minimum_size_changed" from="VBoxContainer/CenterContainer/VBoxContainer" to="VBoxContainer/CenterContainer/VBoxContainer" method="_on_VBoxContainer_minimum_size_changed"]
[connection signal="visibility_changed" from="VBoxContainer/CenterContainer/VBoxContainer/Label" to="VBoxContainer/CenterContainer/VBoxContainer" method="_on_Label_visibility_changed"]
[connection signal="timeout" from="VBoxContainer/CenterContainer/VBoxContainer/Label/Timer" to="." method="_on_Timer_timeout"]
[connection signal="pressed" from="VBoxContainer/CenterContainer/VBoxContainer/Button" to="." method="_on_Button_pressed"]
